<!DOCTYPE html >
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
 <!-- <style type="text/css">
        body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"å¾®è½¯é›…é»‘";}
        #allmap{height:500px;width:100%;}
        #r-result{width:100%; font-size:14px;}
    </style>-->
    <style>
        .comment { width: 680px; margin: 20px auto; position: relative; background: #fff; padding: 20px 50px 50px; border: 1px solid #DDD; border-radius: 5px; }
        .comment h3 { height: 28px; line-height: 28px }
        .com_form { width: 100%; position: relative }
        .input { width: 99%; height: 60px; border: 1px solid #ccc }
        .com_form p { height: 28px; line-height: 28px; position: relative; margin-top: 10px; }
        span.emotion { width: 42px; height: 20px; padding-left: 20px; cursor: pointer }
        span.emotion:hover { background-position: 2px -28px }
        .qqFace { margin-top: 4px; background: #fff; padding: 2px; border: 1px #dfe6f6 solid; }
        .qqFace table td { padding: 0px; }
        .qqFace table td img { cursor: pointer; border: 1px #fff solid; }
        .qqFace table td img:hover { border: 1px #0066cc solid; }
        #show { width: 770px; margin: 20px auto; background: #fff; padding: 5px; border: 1px solid #DDD; vertical-align: top; }
        .sub_btn { position: absolute; right: 0px; top: 0; display: inline-block; zoom: 1; /* zoom and *display = ie7 hack for display:inline-block */  *display: inline;
            vertical-align: baseline; margin: 0 2px; outline: none; cursor: pointer; text-align: center; font: 14px/100% Arial, Helvetica, sans-serif; padding: .5em 2em .55em; text-shadow: 0 1px 1px rgba(0,0,0,.6); -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.2); -moz-box-shadow: 0 1px 2px rgba(0,0,0,.2); box-shadow: 0 1px 2px rgba(0,0,0,.2); color: #e8f0de; border: solid 1px #538312; background: #64991e; background: -webkit-gradient(linear, left top, left bottom, from(#7db72f), to(#4e7d0e)); background: -moz-linear-gradient(top, #7db72f, #4e7d0e);  filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#7db72f', endColorstr='#4e7d0e');
        }
        .sub_btn:hover { background: #538018; background: -webkit-gradient(linear, left top, left bottom, from(#6b9d28), to(#436b0c)); background: -moz-linear-gradient(top, #6b9d28, #436b0c);  filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#6b9d28', endColorstr='#436b0c');
        }
    </style>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=GCwaboPOtvBE9KIcr0HjDkEKgQgPL2iH"></script>


    <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css"/>
    <style>
        html,body,#container{
            margin:0;
            height:100%;
        }
        .input-item-text{
            width:7rem;
        }
    </style>
    <link href="../textarea/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="../textarea/css/reset.css">
    <script  src="../textarea/js/jquery.min.js"></script>
    <script type="text/javascript" src="../textarea/js/jquery.qqFace.js"></script>
    <!-- Bootstrap æ’ä»¶ css -->
    <link href="../js/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- Bootstrap æ ¸å¿ƒcss -->
    <link href="../js/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap TreeView css -->
    <link href="../js/bootstrap-treeview/dist/bootstrap-treeview.min.css" rel="stylesheet">

    <!-- Bootstrap addTabs css -->
    <link href="../js/bootStrap-addTabs/bootstrap.addtabs.css" rel="stylesheet">

    <!-- Bootstrap table css -->
    <link href="../js/bootstrap-table/dist/bootstrap-table.css" rel="stylesheet">
    <!-- bootstrap-datetimepicker css -->
    <link href="../js/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css" rel="stylesheet">

    <!-- bootstrap-dialog css -->
    <link href="/js/bootstrap-dialog/dist/css/bootstrap-dialog.css" rel="stylesheet">
    <!-- bootstrap-fileinput css -->
    <link href="../js/bootstrap-fileinput/css/fileinput.css" rel="stylesheet">
</head>



<!--jQueryæ ¸å¿ƒjs  -->
<script src="../js/jquery.min.js"></script>
<!-- bootstrap æ ¸å¿ƒjsæ–‡ä»¶ -->
<script src="../js/bootstrap/js/bootstrap.min.js"></script>
<!-- bootStrap TreeView -->
<script src="../js/bootstrap-treeview/dist/bootstrap-treeview.min.js"></script>

<!-- bootStrap addTabs -->
<script src="../js/bootStrap-addTabs/bootstrap.addtabs.js"></script>

<!-- bootStrap table -->
<script src="../js/bootstrap-table/dist/bootstrap-table.js"></script>
<!-- bootStrap table è¯­è¨€åŒ…ä¸­æ–‡-->
<script src="../js/bootstrap-table/dist/locale/bootstrap-table-zh-CN.js"></script>

<!-- bootstrap-datetimepicker -->
<script src="../js/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
<script src="../js/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>

<!-- bootstrap-dialog -->
<script src="../js/bootstrap-dialog/dist/js/bootstrap-dialog.js"></script>
<!-- bootstrap-fileinput -->
<script src="../js/bootstrap-fileinput/js/fileinput.js"></script>
<script src="../js/bootstrap-fileinput/js/locales/zh.js"></script>
<body>

<div class="container">
    <form id="fm">
    <div class="row clearfix">
        <div class="col-md-8 column">
            <div>
                <br>

                <b><h4><span th:text="${venue.venueName}"></span>&nbsp;&nbsp;<input type="button"   class="btn btn-info btn-circle btn-lg" id="button" onclick='buttonlike()'>
                    <br><br> é¢„çº¦ç”µè¯ï¼š<span th:text="${venue.venuePhone}"></span><br><br>
                    <br> åœºé¦†åœ°å€ï¼š<span th:text="${venue.venueAddress}"></span>
                    <br><br>
                ä»·æ ¼ï¼š<span th:text="${venue.price}" ></span>èµ·
               <br><br>

                    åœ°é“ï¼š<span th:text="${venue.venueMetro}"></span><br><br>
                    å…¬äº¤ï¼š<span th:text="${venue.venueCar}"></span><br>
                <br><br>

                    åœºåœ°ç±»å‹ï¼š<span th:text="${venue.venueTypeName}"></span>
                <br><br>

                    æ´—æµ´ï¼š<span th:text="${venue.venueBath}"></span>
               <br><br>

                    å‘ç¥¨ï¼š <span th:text="${venue.venueInvoice}"></span>
                <br><br>

                    è¥ä¸šæ—¶é—´ï¼š <span th:text="${venue.doTime}"></span>
                <br><br>

                    æ¸©é¦¨æç¤ºï¼š<span th:text="${venue.venueHint}"></span>
                </h4></b>
                <br>
                <br>
                <br>
                <h3>åœºé¦†é¢„å®š</h3>
            </div>
        </div>
        <div class="col-md-2">
            <div>
                <input id="like" type="hidden"  th:value="${venue.venueLike}" >
                <img src="../img/hh.jpg"   th:value="${venue.img}" style="width: 350px;height:250px">
                <input type="hidden" name="venueId" id="venueId" th:value="${venue.venueId}">
               <br>
                <br>
                <!--åœ°å›¾-->
                <div id="allmap" style="height:300px;width:350px"></div>

                <!--end-->

            </div>
        </div>

    </div>  <br>
<div>
</div>
<center>
    <table  id="timeChang" class="table table-bordered" style="height:230px;width:950px;">
    </table></center>
    </table>
    <div style="width:400px;height:80px;" name="orderPrice" >
        <input type="hidden" id="orderPrice" name="orderPrice" >
        <font style="font-size: 40px"   ><b>æ€»è®¡:<span id="span2" >0</span>å…ƒ</b></font>
    </div>
    </dt><br>
    <dt>
        <button type="button" class="btn btn-danger" onclick="goPayment('+${venue.price}+')">æäº¤è®¢å•</button>
    </dt>



</form>
</div>
<h3>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç”¨æˆ·è¯„è®º</h3><hr style="filter: alpha(opacity=0,finishopacity=100,style=1)" width="80%"  color="black" size="10px">
<center>
    <table  id="appraiseTable" class="table table-bordered" style="height:230px;width:950px;">

    </table></center>
    <br>
    <!--<textarea id="apptext" class="form-control" rows="3"></textarea>-->
<div id="show"></div>
<div class="comment">
    <div class="com_form">
        <textarea class="input"id="apptext"  name="saytext"></textarea>
        <p>
            <input type="button"onclick="appadd()" id="saytext" name="saytext"  class="sub_btn" value="æäº¤">
            <span class="emotion">è¡¨æƒ…</span></p>

    </div>

</div>

    <br>
    <br>
<script>
    $(function () {

        querylike()
    })
    function querylike() {

        if ($("#like").val()==1){
            $("#button").val("ğŸ’–")
        }else {
            $("#button").val("ï¼‹")
        }
    }

    function appadd(){
        var venueId=   $("#venueId").val()
        var apptext= $("#apptext").val()
        $.ajax({
            url:'../exercise/appadd',
            type:"post",
            data:{venueId:venueId,praiseInfo:apptext},
            success:function(){
                location.href=location;
            },error:function(){
                alert("å¤±è´¥");
            }

        });
    }

    function buttonlike(){

        var venueId=   $("#venueId").val()
        var likeId= $("#like").val()
        $.ajax({
            url:'../exercise/venuelike',
            type:"post",
            data:{venueId:venueId,likeId:likeId},
            success:function(){
                location.href=location;
                querylike()
            },error:function(){
                alert("æ”¶è—å¤±è´¥");
            }

        });
    }
    $(function(){
        queryAppraise();
        queryList();
    })
    function queryList () {

        $("#timeChang").bootstrapTable({
            url:"../exercise/queryList",
            columns:[
                [
                    {field:'id',
                        formatter:function (value,row,index) {

                            return index+1+"å·åœº";
                        }},
                    {field:'er',title:'0-3',
                    formatter:function (value,row,index) {
                        return "<a href='javascript:open("+value+")'>"+value+"</a>"
                    }
                    },
                    {field:'si',title:'3-6',
                        formatter:function (value,row,index) {
                            return "<a href='javascript:open("+value+")'>"+value+"</a>"
                        }},
                    {field:'liu',title:'6-9',formatter:function (value,row,index) {
                            return "<a href='javascript:open("+value+")'>"+value+"</a>"
                        }},
                    {field:'ba',title:'9-12',formatter:function (value,row,index) {
                            return "<a href='javascript:open("+value+")'>"+value+"</a>"
                        }},
                    {field:'shi',title:'12-15',formatter:function (value,row,index) {
                            return "<a href='javascript:open("+value+")'>"+value+"</a>"
                        }},
                    {field:'shier',title:'15-18',formatter:function (value,row,index) {
                            return "<a href='javascript:open("+value+")'>"+value+"</a>"
                        }},
                    {field:'shisi',title:'18-21',formatter:function (value,row,index) {
                            return "<a href='javascript:open("+value+")'>"+value+"</a>"
                        }},
                    {field:'shiliu',title:'21-24',formatter:function (value,row,index) {
                            return "<a href='javascript:open("+value+")'>"+value+"</a>"
                        }},
                ]
            ]
        })

    }
    function  open(value){
        var cc=parseInt(value)+ parseInt($("#span2").html());


        $("#span2").html(cc);
    }



    function goPayment() {
      var price=  $("#span2").html()

        $("#orderPrice").val(price)
        alert($("#fm").serialize())
       $.ajax({
           url:'../exercise/addPayment',
           data:$("#fm").serialize(),
           success:function () {
               location.href="../page/toMap";
           }
       })

    }



    function queryAppraise() {
        var venueId=   $("#venueId").val();
            $("#appraiseTable").bootstrapTable({
            url:"../exercise/queryAppraise?venueId="+venueId,
            columns:[
                [
                    {field:'praiseInfo',title:'',
                    formatter:function (vlaue,row,index) {
                        return vlaue+"    <a href='javascript:huifu()'>å›å¤</a>"
                    }
                    }
                ]
            ]
        })
    }

   function huifu(){


   }
    /*function makerOrede(venueId) {

        $.ajax({
            url:'../exercise/makeOrder',
            data:{userId:$("#userId"),venueId:venueId},
            type:'post',
            success:function (msg) {
                if(msg == 'error'){
                    alert("é¢„çº¦å¤±è´¥")
                    location.href = "../login/login";
                }
                if (msg == 'success'){
                    alert("é¢„çº¦æˆåŠŸ")
                    location.href = "../Order";
                }
            }
        })
    }
*/
</script>
<script type="text/javascript">
    // ç™¾åº¦åœ°å›¾APIåŠŸèƒ½
    var map = new BMap.Map("allmap");
    var point = new BMap.Point(116.331398,39.897445);
    map.centerAndZoom(point,11);
    function myFun(result){
        var cityName = result.name;
        map.setCenter(cityName);
        //alert("å½“å‰å®šä½åŸå¸‚:"+cityName);
    }

    map.enableScrollWheelZoom(true);     //å¼€å¯é¼ æ ‡æ»šè½®ç¼©æ”¾
    // åˆ›å»ºåœ°å€è§£æå™¨å®ä¾‹
    var myGeo = new BMap.Geocoder();
    // å°†åœ°å€è§£æç»“æœæ˜¾ç¤ºåœ¨åœ°å›¾ä¸Š,å¹¶è°ƒæ•´åœ°å›¾è§†é‡
    myGeo.getPoint("é›å¡”åŒºå«å…‰è·¯å—è·¯216å·å˜‰ç¿”å¤§å¦2å±‚ ", function(point){
        if (point) {
            map.centerAndZoom(point, 16);
            map.addOverlay(new BMap.Marker(point));
        }else{
            alert("æ‚¨é€‰æ‹©åœ°å€æ²¡æœ‰è§£æåˆ°ç»“æœ!");
        }
    }, "åŒ—äº¬å¸‚");

</script>
<script type="text/javascript">

    $(function(){

        $('.emotion').qqFace({

            id : 'facebox',

            assign:'saytext',

            path:'../textarea/arclist/'	//è¡¨æƒ…å­˜æ”¾çš„è·¯å¾„

        });

        $(".sub_btn").click(function(){

            var str = $("#saytext").val();
    alert(str)
            $("#show").html(replace_em(str));

        });

    });

    //æŸ¥çœ‹ç»“æœ

    function replace_em(str){

        str = str.replace(/\</g,'&lt;');

        str = str.replace(/\>/g,'&gt;');

        str = str.replace(/\n/g,'<br/>');

        str = str.replace(/\[em_([0-9]*)\]/g,'<img src="../textarea/arclist/1.gif" border="0" />');

        return str;

    }

</script>

</body>
</html>